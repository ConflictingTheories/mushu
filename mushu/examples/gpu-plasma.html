<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>mushu â€” WebGPU Plasma Demo</title>
  <style>body{margin:0;overflow:hidden;background:#000}</style>
</head>
<body>
<canvas id="c" style="position:fixed;inset:0;width:100%;height:100%"></canvas>
<script type="module">
import { yoGPU } from '../src/index.js';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// WebGPU Plasma Effect
// Classic demo-scene plasma with modern WGSL
// Move mouse to influence the colors!
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

yoGPU(document.getElementById('c'))
  .display(`
    @group(0) @binding(0) var<uniform> time: f32;
    @group(0) @binding(1) var<uniform> resolution: vec2f;
    @group(0) @binding(2) var<uniform> mouse: vec2f;
    @group(0) @binding(3) var<uniform> mouseDown: f32;

    @fragment
    fn main(@builtin(position) pos: vec4f) -> @location(0) vec4f {
      let uv = pos.xy / resolution;
      let p = (pos.xy - resolution * 0.5) / resolution.y;
      let t = time * 0.5;
      
      // Mouse influence
      let mouseInfluence = (mouse - 0.5) * 0.4;
      var q = p + mouseInfluence;
      
      // Classic plasma patterns
      var v = 0.0;
      
      // Sine wave interference
      v += sin(q.x * 10.0 + t);
      v += sin(q.y * 10.0 + t * 0.7);
      v += sin((q.x + q.y) * 10.0 + t * 0.5);
      v += sin(sqrt(q.x * q.x + q.y * q.y + 1.0) * 12.0 - t * 1.5);
      
      // Circular waves from center
      let cx = q.x + 0.5 * sin(t * 0.3);
      let cy = q.y + 0.5 * cos(t * 0.4);
      v += sin(sqrt(cx * cx + cy * cy + 1.0) * 10.0 + t);
      
      // Additional complexity
      v += sin(q.x * 5.0 + sin(q.y * 3.0 + t) * 2.0);
      
      v *= 0.25;
      
      // Rainbow color palette
      let r = sin(v * 3.14159) * 0.5 + 0.5;
      let g = sin(v * 3.14159 + 2.094) * 0.5 + 0.5;
      let b = sin(v * 3.14159 + 4.188) * 0.5 + 0.5;
      
      var col = vec3f(r, g, b);
      
      // Glow effect when mouse is pressed
      if (mouseDown > 0.5) {
        let mousePx = mouse * resolution;
        let d = length(pos.xy - mousePx) / resolution.y;
        col += vec3f(1.0, 0.8, 0.5) * exp(-d * 4.0) * 1.5;
      }
      
      // Slight vignette
      let vignette = 1.0 - length(uv - 0.5) * 0.4;
      col *= vignette;
      
      return vec4f(col, 1.0);
    }
  `)
  .go();

console.log('%c ğŸŒˆ mushu WebGPU Plasma Ready ', 'background: linear-gradient(90deg, #ff00ff, #00ffff); color: white; padding: 8px 16px; border-radius: 4px; font-weight: bold;');
console.log('Move mouse to influence colors. Click for glow effect!');
</script>
</body>
</html>
